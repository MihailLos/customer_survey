
import streamlit as st

st.set_page_config(page_title="Опрос о маркировке пищевой продукции", layout="centered")

if "page" not in st.session_state:
    st.session_state.page = 0

def go_next():
    st.session_state.page += 1

if st.session_state.page == 0:
    st.title("Добро пожаловать в опрос!")
    st.markdown("#### Исследование потребительских предпочтений при выборе пищевой продукции")
    st.markdown("**Цель опроса** — выявить ключевые факторы, влияющие на выбор продуктов питания на основе маркировки.")
    st.markdown("Опрос займет не более 5–7 минут. Ваши ответы анонимны и будут использованы исключительно в исследовательских целях.")
    st.button("Начать опрос", on_click=go_next)

elif st.session_state.page == 1:
    st.title("Анкета по потребительским предпочтениям при выборе пищевой продукции")

    st.markdown("### Блок 2. Вопросы о потребительском поведении")

    q1 = st.radio("1. Как часто Вы покупаете пищевую продукцию?", 
                ["Каждый день", "Несколько раз в неделю", "Один раз в неделю", "Реже одного раза в неделю"])

    q2 = st.multiselect("2. Где чаще всего Вы приобретаете пищевую продукцию?",
                        ["Супермаркеты", "Магазины 'у дома'", "Ларьки/киоски", "Рынки", 
                        "Онлайн-сервисы доставки", "Другое"])

    q3_1 = st.text_input("3. Элемент 1 маркировки, который должен быть выделен:")
    q3_2 = st.text_input("Элемент 2 маркировки, который должен быть выделен:")
    q3_3 = st.text_input("Элемент 3 маркировки, который должен быть выделен:")

    st.markdown("#### Вопросы 4–12: Отметьте наиболее важную и наименее важную информацию")
    maxdiff_answers = []
    for i in range(4, 13):
        st.markdown(f"**Вопрос {i}**")
        most = st.radio(f"Наиболее важная информация", [f"{j+1}" for j in range(4)], key=f"m{i}")
        least = st.radio(f"Наименее важная информация", [f"{j+1}" for j in range(4)], key=f"l{i}")
        maxdiff_answers.append((most, least))

    q13 = st.radio("13. Насколько Вы осведомлены о содержании нутриентов?",
                ["Хорошо ориентируюсь", "Частично понимаю", "Знаю общие принципы", "Не обращаю внимания"])

    q14 = st.radio("14. Насколько для Вас важна информация о пользе продукции для здоровья?",
                ["Очень важно", "Скорее важно", "Не имеет значения"])

    q15 = st.radio("15. Часто ли Вы сталкиваетесь с трудностями при покупке продукции?",
                ["Да, регулярно", "Иногда", "Нет"])

    q16 = st.radio("16. Обращаете ли Вы внимание на специализированную продукцию?",
                ["Да, это важно", "Иногда обращаю внимание", "Нет, не обращаю внимание"])

    q17 = st.multiselect("17. Какой информацией Вы хотели бы пользоваться при выборе продукции?",
                        ["Рейтинги качества", "Сравнение цен", "Анализ состава", "Отзывы", 
                        "Рекомендации по здоровому питанию", "Другое"])

    q18 = st.radio("18. Читаете ли Вы информацию на упаковке перед покупкой?",
                ["Всегда внимательно изучаю", "Смотрю, но не углубляюсь", 
                    "Читаю только при выборе новой продукции", "Не обращаю внимания"])

    q19 = st.radio("19. Хотели бы вы пользоваться цифровой системой подбора продукции?",
                ["Да", "Нет", "Затрудняюсь ответить"])

    st.markdown("### Блок 3. Социально-демографический")

    q20 = st.radio("20. Пол", ["Мужской", "Женский"])
    q21 = st.radio("21. Возрастная категория", ["18–29 лет", "30–39 лет", "40–49 лет", "50–59 лет", "60 лет и выше"])
    q22 = st.radio("22. Образование", 
                ["Школа", "Неоконченное среднее специальное", "Колледж / техникум", "Неоконченное высшее",
                    "Бакалавриат / специалитет", "Магистратура / аспирантура", "Другое"])
    q23 = st.radio("23. Род занятий", 
                ["Учащийся / студент", "Работающий (наёмный)", "Самозанятый / предприниматель",
                    "Пенсионер", "Безработный", "Другое"])
    q24 = st.radio("24. Семейное положение", ["Состою в браке", "Не состою в браке"])
    q25 = st.radio("25. Сколько человек проживает с Вами?", 
                ["Один", "1 человек", "2 человека", "3 человека", "4 человека", "5 и более"])
    q26 = st.radio("26. Насколько комфортно Вам покрывать расходы на питание?",
                ["Очень комфортно", "Достаточно комфортно", "Затруднительно", "Очень сложно"])
    q27 = st.radio("27. Есть ли у вас дети до 18 лет?", ["Да", "Нет"])

    if st.button("Отправить"):
        st.success("Спасибо за участие в опросе!")
